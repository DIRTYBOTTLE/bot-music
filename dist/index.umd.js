!function(t,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e=n();for(var i in e)("object"==typeof exports?exports:t)[i]=e[i]}}(self,(()=>(()=>{"use strict";var t={295:(t,n,e)=>{e.d(n,{Z:()=>a});var i=e(39),r=e.n(i),s=e(499),o=e.n(s)()(r());o.push([t.id,":root {\n  --primary-color: rgb(200, 200, 200);\n}\n\n.music-bot {\n  height: 60px;\n  width: 50px;\n  position: relative;\n}\n\n#playBot {\n  background-color: transparent;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 0 25px 40px 25px;\n  border-color: transparent transparent var(--primary-color) transparent;\n  transform: rotate(90deg) translateY(5px) translateX(-5px) scale(90%);\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n  outline: none;\n}\n\n#playBot.pause {\n  width: 40px;\n  height: 50px;\n  position: relative;\n  background-color: transparent;\n  border: none;\n  padding: 0;\n  cursor: pointer;\n  transform: none;\n}\n\n#playBot.pause::before,\n#playBot.pause::after {\n  content: \"\";\n  position: absolute;\n  top: 60%;\n  width: 5px;\n  height: 40px;\n  background-color: var(--primary-color);\n  transform: translateY(-50%);\n}\n\n#playBot.pause::before {\n  left: 5px;\n}\n\n#playBot.pause::after {\n  left: 25px;\n}\n\n#nextBot {\n  background-color: transparent;\n  outline: none;\n  border-width: 0;\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n  position: absolute;\n  right: 0;\n  bottom: 0;\n}\n\n#lyrSwitchBot {\n  background-color: transparent;\n  outline: none;\n  border-width: 0;\n  margin: 0;\n  padding: 0;\n  cursor: pointer;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n#lyrBot {\n    display: flex;\n    width: 150px;\n    font-size: 8px;\n}\n#lyrBot.hidden {\n    display: none;\n}\n\n/* .music-cover {\n    display: block;\n    width: 5em;\n    height: 5em;\n    z-index: 2;\n    cursor: pointer;\n    background-image: url('../img/music.png');\n    background-size: cover;\n}\n\n.music-button {\n    background-color: rgba(255, 255, 255, 0.8);\n    border-top-right-radius: 1em;\n    display: flex;\n    justify-content: space-between;\n    padding-left: 0.5em;\n    padding-right: 0.5em;\n    width: 6em;\n    z-index: 1;\n    transition: 0.5s;\n}\n\n.music-button.hidden {\n    transform: translateX(-7em);\n}\n\n.action-btn {\n    background-color: transparent;\n    border: 0;\n    color: black;\n    font-size: 1em;\n    cursor: pointer;\n}\n\n.action-btn.action-btn-big {\n    font-size: 2em;\n}\n\n.lyr-switch {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    cursor: pointer;\n}\n\n.lyr-switch:hover {\n    color: white;\n}\n\n.lyr {\n    width: 12em;\n    text-align: center;\n    font-family: STKaiti, KaiTi;\n}\n\n.lyr.hidden {\n    visibility: hidden;\n} */\n",""]);const a=o},499:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e="",i=void 0!==n[5];return n[4]&&(e+="@supports (".concat(n[4],") {")),n[2]&&(e+="@media ".concat(n[2]," {")),i&&(e+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),e+=t(n),i&&(e+="}"),n[2]&&(e+="}"),n[4]&&(e+="}"),e})).join("")},n.i=function(t,e,i,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);i&&o[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),e&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=e):d[2]=e),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),n.push(d))}},n}},39:t=>{t.exports=function(t){return t[1]}},856:t=>{var n=[];function e(t){for(var e=-1,i=0;i<n.length;i++)if(n[i].identifier===t){e=i;break}return e}function i(t,i){for(var s={},o=[],a=0;a<t.length;a++){var c=t[a],l=i.base?c[0]+i.base:c[0],d=s[l]||0,u="".concat(l," ").concat(d);s[l]=d+1;var p=e(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(h);else{var y=r(h,i);i.byIndex=a,n.splice(a,0,{identifier:u,updater:y,references:1})}o.push(u)}return o}function r(t,n){var e=n.domAPI(n);return e.update(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,r){var s=i(t=t||[],r=r||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=e(s[o]);n[a].references--}for(var c=i(t,r),l=0;l<s.length;l++){var d=e(s[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}s=c}}},370:t=>{var n={};t.exports=function(t,e){var i=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}},278:t=>{t.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},458:(t,n,e)=>{t.exports=function(t){var n=e.nc;n&&t.setAttribute("nonce",n)}},470:t=>{t.exports=function(t){var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var i="";e.supports&&(i+="@supports (".concat(e.supports,") {")),e.media&&(i+="@media ".concat(e.media," {"));var r=void 0!==e.layer;r&&(i+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),i+=e.css,r&&(i+="}"),e.media&&(i+="}"),e.supports&&(i+="}");var s=e.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),n.styleTagTransform(i,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}},488:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}}},n={};function e(i){var r=n[i];if(void 0!==r)return r.exports;var s=n[i]={id:i,exports:{}};return t[i](s,s.exports,e),s.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.nc=void 0;var i={};return(()=>{e.r(i),e.d(i,{default:()=>m});var t=e(856),n=e.n(t),r=e(470),s=e.n(r),o=e(370),a=e.n(o),c=e(458),l=e.n(c),d=e(278),u=e.n(d),p=e(488),h=e.n(p),y=e(295),f={};f.styleTagTransform=h(),f.setAttributes=l(),f.insert=a().bind(null,"head"),f.domAPI=s(),f.insertStyleElement=u(),n()(y.Z,f),y.Z&&y.Z.locals&&y.Z.locals;const m=class{constructor({el:t,sever:n="netease",type:e="playlist",id:i="439665401"}={}){this.el=t,this.sever=n,this.type=e,this.id=i,this.musicList=void 0,this.musicIndex=0,this.init()}createEl(){const t=document.querySelector(this.el);t.innerHTML='\n    <audio id="audioBot"></audio>\n    <div id="lyrBot"></div>\n    <div class="music-bot">\n      <button id="playBot"/>\n      <button id="nextBot">切</button>\n      <button id="lyrSwitchBot">词</div>\n    </div>\n    ',this.audio=t.querySelector("#audioBot"),this.lyr=t.querySelector("#lyrBot"),this.play=t.querySelector("#playBot"),this.next=t.querySelector("#nextBot"),this.lyrSwitch=t.querySelector("#lyrSwitchBot"),this.container=t,this.play.addEventListener("click",this.toggleMusic.bind(this)),this.next.addEventListener("click",this.nextMusic.bind(this)),this.audio.addEventListener("error",this.nextMusic.bind(this)),this.audio.addEventListener("ended",this.nextMusic.bind(this)),this.audio.addEventListener("timeupdate",this.dispalyLyric.bind(this)),this.lyrSwitch.addEventListener("click",(()=>this.lyr.classList.toggle("hidden")))}async init(){this.createEl(),await this.getMusicList(),await this.getMusic(this.musicList[this.musicIndex]),this.play.classList.remove("pause"),this.audio.pause()}async getMusicList(){this.musicList=await fetch("https://api.i-meto.com/meting/api?server="+this.sever+"&type="+this.type+"&id="+this.id).then((t=>t.json()))}async getMusic(t){const n=await fetch(t.lrc).then((t=>t.text()));this.lyric=n.split("\n"),this.lyricIndex=0,this.container.title=t.title,this.audio.src=t.url}toggleMusic(){if(this.audio.paused)return this.play.classList.add("pause"),void this.audio.play();this.audio.paused||(this.play.classList.remove("pause"),this.audio.pause())}async nextMusic(){this.musicIndex++,this.musicIndex===this.musicList.length&&(this.musicIndex=0),await this.getMusic(this.musicList[this.musicIndex]),this.audio.play(),this.play.classList.add("pause")}dispalyLyric(){if(this.lyric){const t=/([0-5][0-9]:[0-5][0-9].[0-9][0-9])/,n=t.exec(this.lyric[this.lyricIndex]);if(null!==n){const e=n[0].split(":"),i=60*Number(e[0])+Number(e[1]);let r=0;if(this.lyric[this.lyricIndex+1]){const n=t.exec(this.lyric[this.lyricIndex+1]);if(!n)return void(this.lyr.innerText=this.musicList[this.musicIndex].title);const e=n[0].split(":");r=60*Number(e[0])+Number(e[1])}else r=1e5;if(this.audio.currentTime<i){const t=this.lyric[this.lyricIndex].split("]")[1];if(!t)return void(this.lyr.innerText=this.musicList[this.musicIndex].title);this.lyr.innerText=t}else if(i<this.audio.currentTime&&this.audio.currentTime<r){const t=this.lyric[this.lyricIndex].split("]")[1];if(!t)return void(this.lyr.innerText=this.musicList[this.musicIndex].title);this.lyr.innerText=t}else this.lyricIndex++}else{if(!this.lyric[this.lyricIndex])return void(this.lyr.innerText=this.musicList[this.musicIndex].title);this.lyr.innerText=this.lyric[this.lyricIndex],this.lyricIndex++}}else this.lyr.innerText=this.musicList[this.musicIndex].title}}})(),i})()));